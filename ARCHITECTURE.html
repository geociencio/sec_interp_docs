

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SecInterp - Detailed Project Architecture &mdash; SecInterp 2.9.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=9edc463e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=182a64a0"></script>
      <script src="_static/doctools.js?v=fd6eb6e6"></script>
      <script src="_static/sphinx_highlight.js?v=6ffebe34"></script>
      <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
      <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";





const initStyles = () => {
    const defaultStyle = document.createElement('style');
    defaultStyle.textContent = `pre.mermaid {
    /* Same as .mermaid-container > pre */
    display: block;
    width: 100%;
}

pre.mermaid > svg {
    /* Same as .mermaid-container > pre > svg */
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}`;
    document.head.appendChild(defaultStyle);

    const fullscreenStyle = document.createElement('style');
    fullscreenStyle.textContent = `.mermaid-container {
    display: flex;
    flex-direction: row;
    width: 100%;
}

.mermaid-container > pre {
    display: block;
    width: 100%;
}

.mermaid-container > pre > svg {
    height: 500px;
    width: 100%;
    max-width: 100% !important;
}

.mermaid-fullscreen-btn {
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 95vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-container-fullscreen pre.mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen .mermaid svg {
    height: 100% !important;
    width: 100% !important;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}`;
    document.head.appendChild(fullscreenStyle);
}

// Detect if page has dark background
const isDarkTheme = () => {
    // We use a set of heuristics:
    // 1. Check for common dark mode classes or attributes
    // 2. Check computed background color brightness
    if (document.documentElement.classList.contains('dark') ||
        document.documentElement.getAttribute('data-theme') === 'dark' ||
        document.body.classList.contains('dark') ||
        document.body.getAttribute('data-theme') === 'dark') {
        // console.log("Dark theme detected via class/attribute");
        return true;
    }
    if (document.documentElement.classList.contains('light') ||
        document.documentElement.getAttribute('data-theme') === 'light' ||
        document.body.classList.contains('light') ||
        document.body.getAttribute('data-theme') === 'light') {
        // console.log("Light theme detected via class/attribute");
        return false;
    }
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        // console.log("Dark theme detected via prefers-color-scheme");
        return true;
    }
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        // console.log("Background color brightness:", brightness);
        return brightness < 128;
    }
    // console.log("No dark or light theme detected, defaulting to light theme");
    return false;
};

let darkTheme = isDarkTheme();
let modal = null;
let modalContent = null;
let previousScrollOffset = [window.scrollX, window.scrollY];

const runMermaid = async (rerun) => {
    console.log("Running mermaid diagrams, rerun =", rerun);
    // clear all existing mermaid charts
    let all_mermaids = document.querySelectorAll(".mermaid");

    if (rerun) {
        all_mermaids.forEach((el) => {
            if(!el.hasAttribute("data-original-code")) {
                // store original code
                // console.log(`Storing original code for first run: `, el.innerHTML);
                el.setAttribute('data-original-code', el.innerHTML);
            }
            if(el.getAttribute("data-processed") === "true") {
                // remove and restore original
                el.removeAttribute("data-processed");
                // console.log(`Restoring original code for re-run: `, el.getAttribute('data-original-code'));
                el.innerHTML = el.getAttribute('data-original-code');
            } else {
                // store original code
                // console.log(`Storing original code for re-run: `, el.innerHTML);
                el.setAttribute('data-original-code', el.innerHTML);
            }
        });
        await mermaid.run();
    }

    all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if ("False" === "True") {
        const mermaids_to_add_zoom = -1 === -1 ? all_mermaids.length : -1;
        if(mermaids_to_add_zoom > 0) {
            var svgs = d3.selectAll("");
            if(all_mermaids.length !== mermaids_processed.length) {
                setTimeout(() => runMermaid(false), 200);
                return;
            } else if(svgs.size() !== mermaids_to_add_zoom) {
                setTimeout(() => runMermaid(false), 200);
                return;
            } else {
                svgs.each(function() {
                    var svg = d3.select(this);
                    svg.html("<g class='wrapper'>" + svg.html() + "</g>");
                    var inner = svg.select("g");
                    var zoom = d3.zoom().on("zoom", function(event) {
                        inner.attr("transform", event.transform);
                    });
                    svg.call(zoom);
                });
            }
        }
    } else if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(() => runMermaid(false), 200);
        return;
    }

    // Stop here if not adding fullscreen capability
    if ("True" !== "True") return;

    if (modal !== null ) {
        // Destroy existing modal
        modal.remove();
        modal = null;
        modalContent = null;
    }

    modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">âœ•</button>
        <div class="mermaid-container-fullscreen${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    modalContent = modal.querySelector('.mermaid-container-fullscreen');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = ''
        window.scrollTo({left: previousScrollOffset[0], top: previousScrollOffset[1], behavior: 'instant'});
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            // Already processed, adjust button class if needed
            const existingBtn = mermaidDiv.parentNode.querySelector('.mermaid-fullscreen-btn');
            if (existingBtn) {
                existingBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
            }
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = 'â›¶';
        fullscreenBtn.style.opacity = '50%';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            previousScrollOffset = [window.scroll, window.scrollY];
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.sdisplay = 'block';

                if ("False" === "True") {
                    setTimeout(() => {
                        const g = svg.querySelector('g');
                        if (g) {
                            var svgD3 = d3.select(svg);
                            svgD3.html("<g class='wrapper'>" + svgD3.html() + "</g>");
                            var inner = svgD3.select("g");
                            var zoom = d3.zoom().on("zoom", function(event) {
                                inner.attr("transform", event.transform);
                            });
                            svgD3.call(zoom);
                        }
                    }, 100);
                }
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        container.appendChild(fullscreenBtn);
    });
};

const load = async () => {
    initStyles();

    await runMermaid(true);

    const reRunIfThemeChanges = async () => {
        const newDarkTheme = isDarkTheme();
        if (newDarkTheme !== darkTheme) {
            darkTheme = newDarkTheme;
            console.log("Theme change detected, re-running mermaid with", darkTheme ? "dark" : "default", "theme");
            await mermaid.initialize(
                {...JSON.parse(
                    `{"startOnLoad": false}`
                ),
                ...{ darkMode: darkTheme, theme: darkTheme ? 'dark' : 'default' },
                }
            );
            await runMermaid(true);
        }
    };

    // Update theme classes when theme changes
    const themeObserver = new MutationObserver(reRunIfThemeChanges);
    themeObserver.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    themeObserver.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
};





console.log("Initializing mermaid with", darkTheme ? "dark" : "default", "theme");
mermaid.initialize(
    {...JSON.parse(
        `{"startOnLoad": false}`
    ),
    ...{ darkMode: darkTheme, theme: darkTheme ? 'dark' : 'default' },
    }
);

window.addEventListener("load", load);</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SecInterp - Development Guide" href="DEVELOPMENT_GUIDE.html" />
    <link rel="prev" title="SecInterp User Guide" href="USER_GUIDE.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SecInterp
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="USER_GUIDE.html">SecInterp User Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">SecInterp - Detailed Project Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#table-of-contents">ğŸ“‘ Table of Contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview">ğŸ¯ Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#main-features">Main Features</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#directory-structure">ğŸ“‚ Directory Structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="#system-architecture">ğŸ—ï¸ System Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#full-architecture-diagram">Full Architecture Diagram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#visualizing-mermaid-diagrams-in-vs-code">ğŸ§© Visualizing Mermaid Diagrams in VS Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gui-layer-user-interface">ğŸ–¥ï¸ GUI Layer - User Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#secinterpdialog-main-dialog-py">1. SecInterpDialog (main_dialog.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#key-components">Key Components</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-methods">Main Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signals-and-slots">Signals and Slots</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#previewmanager-main-dialog-preview-py">2. PreviewManager (main_dialog_preview.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Main Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#previewrenderer-preview-renderer-py">3. PreviewRenderer (preview_renderer.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#renderer-architecture">Renderer Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lod-optimization-methods">LOD Optimization Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage-example">Usage Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#profilemeasuretool-measure-tool-py">4. ProfileMeasureTool (measure_tool.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#signals">Signals</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#core-layer-business-logic">âš™ï¸ Core Layer - Business Logic</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#profilecontroller-controller-py">1. ProfileController (controller.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-method">Main Method</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#geologyservice-geology-service-py">2. GeologyService (geology_service.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#processing-flow">Processing Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="#key-methods">Key Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#return-type">Return Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#structureservice-structure-service-py">3. StructureService (structure_service.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#projection-algorithm">Projection Algorithm</a></li>
<li class="toctree-l4"><a class="reference internal" href="#apparent-dip-calculation">Apparent Dip Calculation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Return Type</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#drillholeservice-drillhole-service-py">4. DrillholeService (drillhole_service.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id7">Processing Flow</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#level-validation-architecture">ğŸ›¡ï¸ 3-Level Validation Architecture</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#level-1-type-range-validation-dataclass-layer">Level 1: Type &amp; Range Validation (Dataclass Layer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-2-business-field-validation-form-layer">Level 2: Business Field Validation (Form Layer)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#level-3-domain-cross-layer-validation-project-layer">Level 3: Domain &amp; Cross-Layer Validation (Project Layer)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#drillhole-service">Main Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#utilities-core-utils">5. Utilities (core/utils/)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#geometry-py-345-lines">geometry.py (345 lines)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#drillhole-py-7-297-lines">drillhole.py (7,297 lines)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sampling-py-3-783-lines">sampling.py (3,783 lines)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#datacache-data-cache-py">6. DataCache (data_cache.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cache-strategy">Cache Strategy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#exporters-layer-data-export">ğŸ“¤ Exporters Layer - Data Export</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dataexportorchestrator-orchestrator-py">1. DataExportOrchestrator (orchestrator.py)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id10">Main Method</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#exporter-hierarchy">2. Exporter Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#main-data-flows">ğŸ”„ Main Data Flows</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#flow-1-preview-generation">Flow 1: Preview Generation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-2-data-export">Flow 2: Data Export</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flow-3-parallel-geological-processing">Flow 3: Parallel Geological Processing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#design-patterns">ğŸ¨ Design Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mvc-model-view-controller">1. MVC (Model-View-Controller)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#strategy-pattern">2. Strategy Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#observer-pattern">3. Observer Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#facade-pattern">4. Facade Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#factory-pattern">5. Factory Pattern</a></li>
<li class="toctree-l3"><a class="reference internal" href="#singleton-pattern-implicit">6. Singleton Pattern (Implicit)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#template-method-pattern">7. Template Method Pattern</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#external-dependencies">ğŸŒ External Dependencies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#qgis-core-api">QGIS Core API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qgis-gui-api">QGIS GUI API</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pyqt5">PyQt5</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-optimizations">âš¡ Performance Optimizations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adaptive-level-of-detail-lod">1. Adaptive Level of Detail (LOD)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#curvature-based-adaptive-sampling">2. Curvature-based Adaptive Sampling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-geological-processing">3. Parallel Geological Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#processed-data-cache">4. Processed Data Cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spatial-index-for-filtering">5. Spatial Index for Filtering</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#project-metrics">ğŸ“Š Project Metrics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-statistics">Code Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution-by-layer">Distribution by Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#complexity-by-module">Complexity by Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#feature-coverage">Feature Coverage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#references">ğŸ”— References</a></li>
<li class="toctree-l2"><a class="reference internal" href="#design-principles">ğŸ¨ Design Principles</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#solid-principles">SOLID Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="#other-patterns-and-principles">Other Patterns and Principles</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#extensibility">ğŸš€ Extensibility</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-new-service">Adding a New Service</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-a-new-export-format">Adding a New Export Format</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#deployment">ğŸ“¦ Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="#final-notes">ğŸ“ Final Notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DEVELOPMENT_GUIDE.html">SecInterp - Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="TECHNICAL_COMPENDIUM.html">SecInterp - Technical Compendium</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAINTENANCE_LOG.html">SecInterp - Maintenance &amp; Release Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">sec_interp</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SecInterp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">SecInterp - Detailed Project Architecture</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ARCHITECTURE.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="secinterp-detailed-project-architecture">
<h1>SecInterp - Detailed Project Architecture<a class="headerlink" href="#secinterp-detailed-project-architecture" title="Link to this heading">ïƒ</a></h1>
<blockquote>
<div><p><strong>Complete Technical Documentation for the SecInterp QGIS Plugin</strong>
Version 2.9.0 | Last update: 2026-02-01</p>
<p>âš ï¸ <strong>Important Note</strong>: See the <a class="reference internal" href="CORE_DISTINCTION_GUIDE_EN.html"><span class="std std-doc">Core Components Distinction Guide (EN)</span></a> or <a class="reference internal" href="CORE_DISTINCTION_GUIDE.html"><span class="std std-doc">GuÃ­a de DistinciÃ³n de Core (ES)</span></a> to differentiate between the <code class="docutils literal notranslate"><span class="pre">SecInterp</span> <span class="pre">Core</span></code> and the <code class="docutils literal notranslate"><span class="pre">qgis.core</span></code> API.</p>
</div></blockquote>
<hr class="docutils" />
<section id="table-of-contents">
<h2>ğŸ“‘ Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">ïƒ</a></h2>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#overview">Overview</a></p></li>
<li><p><a class="reference internal" href="#system-architecture">System Architecture</a></p></li>
<li><p><a class="reference internal" href="#gui-layer-user-interface">GUI Layer - User Interface</a></p></li>
<li><p><a class="reference internal" href="#core-layer-business-logic">Core Layer - Business Logic</a></p></li>
<li><p><a class="reference internal" href="#exporters-layer-data-export">Exporters Layer - Data Export</a></p></li>
<li><p><a class="reference internal" href="#main-data-flows">Main Data Flows</a></p></li>
<li><p><a class="reference internal" href="#design-patterns">Design Patterns</a></p></li>
<li><p><a class="reference internal" href="#external-dependencies">External Dependencies</a></p></li>
<li><p><a class="reference internal" href="#performance-optimizations">Performance Optimizations</a></p></li>
<li><p><a class="reference internal" href="#project-metrics">Project Metrics</a></p></li>
</ol>
<hr class="docutils" />
</section>
<section id="overview">
<span id="id1"></span><h2>ğŸ¯ Overview<a class="headerlink" href="#overview" title="Link to this heading">ïƒ</a></h2>
<p><strong>SecInterp</strong> (Section Interpreter) is a QGIS plugin designed for the extraction and visualization of geological data in cross-sections. The plugin allows geologists to generate topographic profiles, project geological outcrops, and analyze structural data in a unified 2D view.</p>
<section id="main-features">
<h3>Main Features<a class="headerlink" href="#main-features" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>âœ… <strong>Interactive Preview System</strong> with real-time rendering</p></li>
<li><p>âœ… <strong>Parallel Processing</strong> for complex geological intersections</p></li>
<li><p>âœ… <strong>Adaptive LOD</strong> (Level of Detail) based on zoom</p></li>
<li><p>âœ… <strong>Measurement Tools</strong> with automatic snapping</p></li>
<li><p>âœ… <strong>Drillhole Support</strong> with 3Dâ†’2D projection</p></li>
<li><p>âœ… <strong>Multi-format Export</strong> (SHP, CSV, PDF, SVG, PNG)</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="directory-structure">
<h2>ğŸ“‚ Directory Structure<a class="headerlink" href="#directory-structure" title="Link to this heading">ïƒ</a></h2>
<p>The project organization follows a clear modular structure to separate the interface, business logic, and utilities.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sec_interp/
â”œâ”€â”€ __init__.py                 # Plugin entry point
â”œâ”€â”€ sec_interp_plugin.py        # Root class (SecInterp)
â”œâ”€â”€ metadata.txt                # QGIS metadata
â”œâ”€â”€ Makefile                    # Automation (deploy, docs)
â”‚
â”œâ”€â”€ core/                       # âš™ï¸ Business Logic (Core Layer)
â”‚   â”œâ”€â”€ controller.py           # Orchestrator (ProfileController)
â”‚   â”œâ”€â”€ algorithms.py           # Pure intersection logic
â”‚   â”œâ”€â”€ models/                 # Dataclasses and settings models
â”‚   â”œâ”€â”€ services/               # Specialized services
â”‚   â”‚   â”œâ”€â”€ profile_service.py  # Topography and sampling
â”‚   â”‚   â”œâ”€â”€ geology_service.py  # Geological intersections
â”‚   â”‚   â”œâ”€â”€ structure_service.py# Structural projection
â”‚   â”‚   â”œâ”€â”€ drillhole_service.py# Desurvey and 3D intervals
â”‚   â”‚   â””â”€â”€ preview_service.py  # Preview orchestrator
â”‚   â”œâ”€â”€ validation/             # ğŸ›¡ï¸ 3-Level Validation Architecture
â”‚   â”‚   â”œâ”€â”€ validators.py       # Level 1: Reusable Type/Range validators
â”‚   â”‚   â”œâ”€â”€ validation_helpers.py# Level 2: Business field constraints
â”‚   â”‚   â””â”€â”€ project_validator.py# Level 3: Cross-layer domain logic
â”‚   â”œâ”€â”€ domain/                 # [NEW] Domain Layer (Entities &amp; DTOs)
â”‚   â”‚   â”œâ”€â”€ entities.py         # Business objects with identity
â”‚   â”‚   â”œâ”€â”€ dtos.py             # Data Transfer Objects
â”‚   â”‚   â”œâ”€â”€ task_inputs.py      # Async Task Inputs
â”‚   â”‚   â””â”€â”€ enums.py            # Domain-pure enumerations
â”‚   â””â”€â”€ utils/                  # Utilities (Geometry, Spatial, etc.)
â”‚
â”œâ”€â”€ gui/                        # ğŸ–¥ï¸ User Interface (GUI Layer)
â”‚   â”œâ”€â”€ main_dialog.py          # Main dialog (Simplified)
â”‚   â”œâ”€â”€ preview_renderer.py     # Native PyQGIS rendering
â”‚   â”œâ”€â”€ tasks/                  # ğŸš€ Asynchronous QgsTasks
â”‚   â”‚   â”œâ”€â”€ geology_task.py     # Background geology intersection
â”‚   â”‚   â””â”€â”€ drillhole_task.py   # Background drillhole projection
â”‚   â”œâ”€â”€ managers/               # ğŸ§© UI Logic Managers
â”‚   â”‚   â”œâ”€â”€ interpretation_mgr.py # Interpretation persistence
â”‚   â”‚   â””â”€â”€ message_mgr.py      # Feedback and alerts
â”‚   â”œâ”€â”€ ui/                     # Components and Pages (Layouts)
â”‚   â””â”€â”€ tools/                  # Map tools (Measure Tool)
â”‚
â”œâ”€â”€ exporters/                  # ğŸ“¤ Export Layer
â”‚   â”œâ”€â”€ base_exporter.py        # Export interface
â”‚   â”œâ”€â”€ shp_exporter.py         # Generic Shapefile exporter
â”‚   â”œâ”€â”€ profile_exporters.py    # Specific profile exporters
â”‚   â””â”€â”€ drillhole_exporters.py  # Drillhole exporters
â”‚
â”œâ”€â”€ docs/                       # ğŸ“š Technical documentation and manuals
â”œâ”€â”€ tests/                      # ğŸ§ª Unit test suite
â””â”€â”€ resources/                  # ğŸ¨ Icons and Qt resources
</pre></div>
</div>
<hr class="docutils" />
</section>
<section id="system-architecture">
<span id="id2"></span><h2>ğŸ—ï¸ System Architecture<a class="headerlink" href="#system-architecture" title="Link to this heading">ïƒ</a></h2>
<section id="full-architecture-diagram">
<h3>Full Architecture Diagram<a class="headerlink" href="#full-architecture-diagram" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        graph TB
    %% ========== ENTRY POINT ==========
    QGIS[QGIS Application]
    INIT[__init__.py&lt;br/&gt;Entry Point]
    PLUGIN[sec_interp_plugin.py&lt;br/&gt;SecInterp Class&lt;br/&gt;Plugin Root]

    %% ========== GUI LAYER ==========
    subgraph GUI[&quot;ğŸ–¥ï¸ GUI Layer - User Interface&quot;]
        direction TB

        MAIN[main_dialog.py&lt;br/&gt;SecInterpDialog&lt;br/&gt;~350 lines]

        subgraph MANAGERS[&quot;Managers&quot;]
            SIGNALS_MGR[main_dialog_signals.py&lt;br/&gt;SignalManager]
            DATA_MGR[main_dialog_data.py&lt;br/&gt;DataAggregator]
            PREVIEW_MGR[main_dialog_preview.py&lt;br/&gt;PreviewManager]
            EXPORT_MGR[main_dialog_export.py&lt;br/&gt;ExportManager]
            VALIDATION_MGR[main_dialog_validation.py&lt;br/&gt;DialogValidator]
            INTERP_MGR[interpretation_manager.py&lt;br/&gt;InterpretationManager]
            MSG_MGR[message_manager.py&lt;br/&gt;MessageManager]
            CONFIG_MGR[main_dialog_config.py&lt;br/&gt;DialogDefaults]
        end

        RENDERER[preview_renderer.py&lt;br/&gt;PreviewRenderer&lt;br/&gt;~280 lines]
        LEGEND[legend_widget.py&lt;br/&gt;LegendWidget]

        subgraph TOOLS[&quot;ğŸ› ï¸ Tools&quot;]
            MEASURE[measure_tool.py&lt;br/&gt;ProfileMeasureTool]
            INTERP_TOOL[interpretation_tool.py&lt;br/&gt;InterpretationTool]
        end

        subgraph UI_WIDGETS[&quot;ğŸ“¦ UI Components&quot;]
            UI_MAIN[main_window.py&lt;br/&gt;SecInterpMainWindow]
            UI_PAGES[Page Classes:&lt;br/&gt;DemPage, SectionPage,&lt;br/&gt;GeologyPage, StructPage,&lt;br/&gt;DrillholePage]
        end
    end

    %% ========== CORE LAYER ==========
    subgraph CORE[&quot;âš™ï¸ Core Layer - Business Logic&quot;]
        direction TB

        CONTROLLER[controller.py&lt;br/&gt;ProfileController&lt;br/&gt;~280 lines]

        subgraph SERVICES[&quot;ğŸ”§ Services&quot;]
            PROFILE_SVC[profile_service.py&lt;br/&gt;ProfileService]
            GEOLOGY_SVC[geology_service.py&lt;br/&gt;GeologyService]
            STRUCTURE_SVC[structure_service.py&lt;br/&gt;StructureService]
            STRUCTURE_SVC[structure_service.py&lt;br/&gt;StructureService]
            subgraph DRILLHOLE_PKG[&quot;Drillhole Sub-system&quot;]
                DRILLHOLE_FACADE[drillhole_service.py&lt;br/&gt;DrillholeService (Facade)]
                COLLAR_PROC[collar_processor.py]
                SURVEY_PROC[survey_processor.py]
                INTERVAL_PROC[interval_processor.py]
                PROJ_ENGINE[projection_engine.py&lt;br/&gt;Pure Math]
            end
        end

        subgraph TASKS[&quot;ğŸš€ QGS TASKS (Extract-then-Compute)&quot;]
            GEO_TASK[geology_task.py&lt;br/&gt;GeologyGenerationTask]
            DRILL_TASK[drillhole_task.py&lt;br/&gt;DrillholeGenerationTask]
        end

        subgraph VALIDATION_PKG[&quot;ğŸ›¡ï¸ Validation Architecture&quot;]
            LEVEL1[validators.py&lt;br/&gt;Type/Range Checks]
            LEVEL2[validation_helpers.py&lt;br/&gt;Business Logic]
            LEVEL3[project_validator.py&lt;br/&gt;Domain Interaction]
        end

        METRICS[performance_metrics.py&lt;br/&gt;Performance Profiling]
        DOMAIN[core/domain/&lt;br/&gt;Domain Layer Package]

        subgraph UTILS[&quot;ğŸ”¨ Utilities&quot;]
            GEOM_UTILS[geometry.py]
            DRILL_UTILS[drillhole.py]
            GEOLOGY_UTILS[geology.py]
            SPATIAL_UTILS[spatial.py]
            SAMPLING_UTILS[sampling.py]
        end
    end

    %% ========== EXPORTERS LAYER ==========
    subgraph EXPORTERS[&quot;ğŸ“¤ Exporters Layer - Export&quot;]
        direction TB

        ORCHESTRATOR[orchestrator.py&lt;br/&gt;DataExportOrchestrator]
        BASE_EXP[base_exporter.py&lt;br/&gt;BaseExporter]

        subgraph EXPORT_FORMATS[&quot;Export Formats&quot;]
            SHP_EXP[shp_exporter.py&lt;br/&gt;ShapefileExporter]
            CSV_EXP[csv_exporter.py&lt;br/&gt;CSVExporter]
            PDF_EXP[pdf_exporter.py&lt;br/&gt;PDFExporter]
            SVG_EXP[svg_exporter.py&lt;br/&gt;SVGExporter]
            IMG_EXP[image_exporter.py&lt;br/&gt;ImageExporter]
            PROFILE_EXP[profile_exporters.py&lt;br/&gt;Profile/Geology/Struct]
            DRILL_EXP[drillhole_exporters.py&lt;br/&gt;2D Traces/Intervals]
            DRILL_3D[drillhole_3d_exporter.py&lt;br/&gt;3D Traces/Intervals]
            INTERP_3D[interpretation_3d_exporter.py&lt;br/&gt;3D Polygons]
        end
    end

    %% ========== CONNECTIONS ==========
    QGIS --&gt;|loads| INIT
    INIT --&gt;|delegates| PLUGIN
    PLUGIN --&gt;|initializes| MAIN

    MAIN --&gt;|delegates| MANAGERS
    MAIN --&gt;|uses| UI_MAIN

    PREVIEW_MGR --&gt;|renders with| RENDERER
    PREVIEW_MGR --&gt;|updates| LEGEND
    PREVIEW_MGR --&gt;|activates| TOOLS
    PREVIEW_MGR --&gt;|launches| TASKS
    TASKS --&gt;|uses| SERVICES

    EXPORT_MGR --&gt;|delegates to| ORCHESTRATOR
    VALIDATION_MGR --&gt;|validates with| VALIDATION_PKG

    CONTROLLER --&gt;|orchestrates| SERVICES
    SERVICES --&gt;|uses| UTILS
    SERVICES --&gt;|uses| ALGORITHMS

    ORCHESTRATOR --&gt;|delegates to| EXPORT_FORMATS

    RENDERER --&gt;|uses| QGIS_GUI
    CONTROLLER --&gt;|uses| QGIS_CORE
    MAIN --&gt;|uses| PYQT5

    classDef entryPoint fill:#ff6b6b,stroke:#c92a2a,stroke-width:3px,color:#fff
    classDef guiLayer fill:#4ecdc4,stroke:#0a9396,stroke-width:2px,color:#000
    classDef coreLayer fill:#95e1d3,stroke:#38a169,stroke-width:2px,color:#000
    classDef exportLayer fill:#ffd93d,stroke:#f59e0b,stroke-width:2px,color:#000
    classDef externalLayer fill:#a8dadc,stroke:#457b9d,stroke-width:2px,color:#000

    class QGIS,PLUGIN entryPoint
    class MAIN,PREVIEW_MGR,EXPORT_MGR,VALIDATION_MGR,CONFIG_MGR,RENDERER,LEGEND,MEASURE guiLayer
    class CONTROLLER,ALGORITHMS,PROJ_VAL,CACHE,METRICS,DOMAIN coreLayer
    class PROFILE_SVC,GEOLOGY_SVC,STRUCTURE_SVC,DRILLHOLE_SVC,PARALLEL_GEO coreLayer
    class ORCHESTRATOR,BASE_EXP,SHP_EXP,CSV_EXP,PDF_EXP,SVG_EXP,IMG_EXP,PROFILE_EXP,DRILL_EXP exportLayer
    class QGIS_CORE,QGIS_GUI,PYQT5 externalLayer
    </pre></section>
</section>
<hr class="docutils" />
<section id="visualizing-mermaid-diagrams-in-vs-code">
<h2>ğŸ§© Visualizing Mermaid Diagrams in VS Code<a class="headerlink" href="#visualizing-mermaid-diagrams-in-vs-code" title="Link to this heading">ïƒ</a></h2>
<p>You can preview Mermaid diagrams in VS Code with the <strong>Mermaid Editor</strong> extension (installed). Quick steps:</p>
<ol class="arabic simple">
<li><p>Open this file <code class="docutils literal notranslate"><span class="pre">docs/ARCHITECTURE.md</span></code>.</p></li>
<li><p>Place the cursor inside a <code class="docutils literal notranslate"><span class="pre">mermaid</span></code> block and open the command palette (Ctrl+Shift+P) â†’ â€œOpen Mermaid Editorâ€ or â€œPreview Mermaidâ€.</p></li>
<li><p>Alternatively, use the Markdown preview (Ctrl+Shift+V) if you have <code class="docutils literal notranslate"><span class="pre">Markdown</span> <span class="pre">Preview</span> <span class="pre">Mermaid</span> <span class="pre">Support</span></code> (already installed).</p></li>
</ol>
<p>Quick Example (edit this block and save to see the preview):</p>
<pre  class="mermaid">
        graph LR
  A[User] --&gt; B[SecInterpPlugin]
  B --&gt; C[Generate Profile]
  C --&gt; D[Export SVG/PNG]
    </pre><hr class="docutils" />
</section>
<section id="gui-layer-user-interface">
<span id="id3"></span><h2>ğŸ–¥ï¸ GUI Layer - User Interface<a class="headerlink" href="#gui-layer-user-interface" title="Link to this heading">ïƒ</a></h2>
<section id="secinterpdialog-main-dialog-py">
<h3>1. SecInterpDialog (main_dialog.py)<a class="headerlink" href="#secinterpdialog-main-dialog-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Main Class</strong>: <code class="docutils literal notranslate"><span class="pre">SecInterpDialog</span></code>
<strong>Inherits from</strong>: <code class="docutils literal notranslate"><span class="pre">SecInterpMainWindow</span></code>
<strong>Lines of code</strong>: ~350 (Unified logic handled by Managers)
<strong>Responsibility</strong>: Simplified main dialog that coordinates components via Managers</p>
<section id="key-components">
<h4>Key Components<a class="headerlink" href="#key-components" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SecInterpDialog</span><span class="p">(</span><span class="n">SecInterpMainWindow</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Dialog for the SecInterp QGIS plugin.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iface</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plugin_instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Logic Managers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signal_manager</span> <span class="o">=</span> <span class="n">DialogSignalManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_aggregator</span> <span class="o">=</span> <span class="n">DialogDataAggregator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Operation Managers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validator</span> <span class="o">=</span> <span class="n">DialogValidator</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preview_manager</span> <span class="o">=</span> <span class="n">PreviewManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_manager</span> <span class="o">=</span> <span class="n">ExportManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_manager</span> <span class="o">=</span> <span class="n">DialogStatusManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">settings_manager</span> <span class="o">=</span> <span class="n">DialogSettingsManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">interpretation_manager</span> <span class="o">=</span> <span class="n">InterpretationManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message_manager</span> <span class="o">=</span> <span class="n">MessageManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">legend_widget</span> <span class="o">=</span> <span class="n">LegendWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pan_tool</span> <span class="o">=</span> <span class="n">QgsMapToolPan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">measure_tool</span> <span class="o">=</span> <span class="n">ProfileMeasureTool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="main-methods">
<h4>Main Methods<a class="headerlink" href="#main-methods" title="Link to this heading">ïƒ</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Location</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_init_managers()</span></code></p></td>
<td><p>Initializes dedicated managers</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">get_selected_values()</span></code></p></td>
<td><p>Facade for the DataAggregator</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">get_all_values()</span></code></p></td>
<td><p>Actual data aggregation from pages</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog_data.py</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">connect_all()</span></code></p></td>
<td><p>Bulk signal connection</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog_signals.py</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">preview_profile_handler()</span></code></p></td>
<td><p>Delegated to PreviewManager</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">export_preview()</span></code></p></td>
<td><p>Delegated to ExportManager</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">update_button_state()</span></code></p></td>
<td><p>Delegated to StatusManager</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="signals-and-slots">
<h4>Signals and Slots<a class="headerlink" href="#signals-and-slots" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Button connections</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">btn_preview</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preview_profile_handler</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">btn_export</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_preview</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">btn_measure</span><span class="o">.</span><span class="n">toggled</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">toggle_measure_tool</span><span class="p">)</span>

<span class="c1"># Checkbox connections</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">chk_topo</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_preview_from_checkboxes</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">chk_geol</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_preview_from_checkboxes</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">chk_struct</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_preview_from_checkboxes</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">preview_widget</span><span class="o">.</span><span class="n">chk_drillholes</span><span class="o">.</span><span class="n">stateChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_preview_from_checkboxes</span><span class="p">)</span>

<span class="c1"># Layer connections</span>
<span class="bp">self</span><span class="o">.</span><span class="n">page_dem</span><span class="o">.</span><span class="n">raster_combo</span><span class="o">.</span><span class="n">layerChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_button_state</span><span class="p">)</span>
<span class="bp">self</span><span class="o">.</span><span class="n">page_section</span><span class="o">.</span><span class="n">line_combo</span><span class="o">.</span><span class="n">layerChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_button_state</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="previewmanager-main-dialog-preview-py">
<h3>2. PreviewManager (main_dialog_preview.py)<a class="headerlink" href="#previewmanager-main-dialog-preview-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">PreviewManager</span></code>
<strong>Lines of code</strong>: ~250
<strong>Responsibility</strong>: Manages preview generation and updates</p>
<section id="id4">
<h4>Main Methods<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">PreviewManager</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_preview</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates preview with validation and error handling.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">update_from_checkboxes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Updates preview when visualization options change.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_validated_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Obtains and validates inputs from the dialog.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_process_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Processes data using the controller.&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="previewrenderer-preview-renderer-py">
<h3>3. PreviewRenderer (preview_renderer.py)<a class="headerlink" href="#previewrenderer-preview-renderer-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">PreviewRenderer</span></code>
<strong>Lines of code</strong>: ~280
<strong>Methods</strong>: 20
<strong>Responsibility</strong>: Renders the preview canvas using native PyQGIS</p>
<section id="renderer-architecture">
<h4>Renderer Architecture<a class="headerlink" href="#renderer-architecture" title="Link to this heading">ïƒ</a></h4>
<pre  class="mermaid">
        graph LR
    A[render] --&gt; B[_create_topo_layer]
    A --&gt; C[_create_geol_layer]
    A --&gt; D[_create_struct_layer]
    A --&gt; E[_create_drillhole_layers]
    A --&gt; F[_create_axes_layer]
    A --&gt; G[_create_axes_labels_layer]

    B --&gt; H[_decimate_line_data]
    B --&gt; I[_adaptive_sample]
    C --&gt; H
    D --&gt; J[_interpolate_elevation]

    H --&gt; K[QgsVectorLayer]
    I --&gt; K
    J --&gt; K
    </pre></section>
<section id="lod-optimization-methods">
<h4>LOD Optimization Methods<a class="headerlink" href="#lod-optimization-methods" title="Link to this heading">ïƒ</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Purpose</p></th>
<th class="head"><p>Algorithm</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_decimate_line_data()</span></code></p></td>
<td><p>Line simplification</p></td>
<td><p>Douglas-Peucker</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_calculate_curvature()</span></code></p></td>
<td><p>Local curvature calculation</p></td>
<td><p>Angle between segments</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_adaptive_sample()</span></code></p></td>
<td><p>Adaptive sampling</p></td>
<td><p>Curvature-based</p></td>
</tr>
</tbody>
</table>
</section>
<section id="usage-example">
<h4>Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">renderer</span> <span class="o">=</span> <span class="n">PreviewRenderer</span><span class="p">(</span><span class="n">canvas</span><span class="p">)</span>

<span class="n">canvas</span><span class="p">,</span> <span class="n">layers</span> <span class="o">=</span> <span class="n">renderer</span><span class="o">.</span><span class="n">render</span><span class="p">(</span>
    <span class="n">topo_data</span><span class="o">=</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">105</span><span class="p">),</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">geol_data</span><span class="o">=</span><span class="p">[</span><span class="n">GeologySegment</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">struct_data</span><span class="o">=</span><span class="p">[</span><span class="n">StructureMeasurement</span><span class="p">(</span><span class="o">...</span><span class="p">),</span> <span class="o">...</span><span class="p">],</span>
    <span class="n">vert_exag</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
    <span class="n">dip_line_length</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span>
    <span class="n">max_points</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">preserve_extent</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="profilemeasuretool-measure-tool-py">
<h3>4. ProfileMeasureTool (measure_tool.py)<a class="headerlink" href="#profilemeasuretool-measure-tool-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">ProfileMeasureTool</span></code>
<strong>Inherits from</strong>: <code class="docutils literal notranslate"><span class="pre">QgsMapTool</span></code>
<strong>Responsibility</strong>: Measurement tool with snapping</p>
<section id="features">
<h4>Features<a class="headerlink" href="#features" title="Link to this heading">ïƒ</a></h4>
<ul class="simple">
<li><p>âœ… <strong>Snapping to vertices</strong> of visible layers</p></li>
<li><p>âœ… <strong>Distance calculation</strong> (Euclidean)</p></li>
<li><p>âœ… <strong>Slope calculation</strong> (slope in degrees)</p></li>
<li><p>âœ… <strong>Real-time visualization</strong> with rubber band</p></li>
</ul>
</section>
<section id="signals">
<h4>Signals<a class="headerlink" href="#signals" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">measurementChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>  <span class="c1"># dx, dy, dist, slope</span>
<span class="n">measurementCleared</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">()</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
</section>
</section>
<section id="core-layer-business-logic">
<span id="id5"></span><h2>âš™ï¸ Core Layer - Business Logic<a class="headerlink" href="#core-layer-business-logic" title="Link to this heading">ïƒ</a></h2>
<section id="profilecontroller-controller-py">
<h3>1. ProfileController (controller.py)<a class="headerlink" href="#profilecontroller-controller-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">ProfileController</span></code>
<strong>Lines of code</strong>: ~280
<strong>Responsibility</strong>: Orchestrates the data generation services</p>
<section id="architecture">
<h4>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ProfileController</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile_service</span> <span class="o">=</span> <span class="n">ProfileService</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geology_service</span> <span class="o">=</span> <span class="n">GeologyService</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">structure_service</span> <span class="o">=</span> <span class="n">StructureService</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drillhole_service</span> <span class="o">=</span> <span class="n">DrillholeService</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">data_cache</span> <span class="o">=</span> <span class="n">DataCache</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="main-method">
<h4>Main Method<a class="headerlink" href="#main-method" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate_profile_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Unified method to generate all profile components.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: (profile_data, geol_data, struct_data, drillhole_data, messages)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># 1. Topography</span>
    <span class="n">profile_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile_service</span><span class="o">.</span><span class="n">generate_topographic_profile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># 2. Geology (if layer exists)</span>
    <span class="k">if</span> <span class="n">outcrop_layer</span><span class="p">:</span>
        <span class="n">geol_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geology_service</span><span class="o">.</span><span class="n">generate_geological_profile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># 3. Structures (if layer exists)</span>
    <span class="k">if</span> <span class="n">structural_layer</span><span class="p">:</span>
        <span class="n">struct_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure_service</span><span class="o">.</span><span class="n">project_structures</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="c1"># 4. Drillholes (if layer exists)</span>
    <span class="k">if</span> <span class="n">collar_layer</span><span class="p">:</span>
        <span class="n">collars</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drillhole_service</span><span class="o">.</span><span class="n">project_collars</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">drillhole_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drillhole_service</span><span class="o">.</span><span class="n">process_intervals</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">profile_data</span><span class="p">,</span> <span class="n">geol_data</span><span class="p">,</span> <span class="n">struct_data</span><span class="p">,</span> <span class="n">drillhole_data</span><span class="p">,</span> <span class="n">messages</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="geologyservice-geology-service-py">
<h3>2. GeologyService (geology_service.py)<a class="headerlink" href="#geologyservice-geology-service-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">GeologyService</span></code>
<strong>Lines of code</strong>: ~540
<strong>Methods</strong>: 8
<strong>Responsibility</strong>: Generates geological profiles by intersecting polygons</p>
<section id="processing-flow">
<h4>Processing Flow<a class="headerlink" href="#processing-flow" title="Link to this heading">ïƒ</a></h4>
<pre  class="mermaid">
        sequenceDiagram
    participant Client
    participant GeoService as GeologyService
    participant Utils as Utils

    Client-&gt;&gt;GeoService: generate_geological_profile()
    GeoService-&gt;&gt;GeoService: _generate_master_profile_data()

    %% Optimized PyQGIS Intersection
    GeoService-&gt;&gt;GeoService: QgsFeatureRequest.setFilterRect()

    loop For each candidate feature
        GeoService-&gt;&gt;GeoService: QgsGeometry.intersection()
        GeoService-&gt;&gt;GeoService: _process_intersection_geometry()
        GeoService-&gt;&gt;Utils: interpolate_elevation()
        Utils--&gt;&gt;GeoService: elevation_points
    end

    GeoService--&gt;&gt;Client: List[GeologySegment]
    </pre></section>
<section id="key-methods">
<h4>Key Methods<a class="headerlink" href="#key-methods" title="Link to this heading">ïƒ</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Method</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">generate_geological_profile()</span></code></p></td>
<td><p>Main method that orchestrates the process</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_generate_master_profile_data()</span></code></p></td>
<td><p>Generates grid of points and elevations</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_perform_intersection()</span></code></p></td>
<td><p>Executes QGIS intersection algorithm</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">_process_intersection_feature()</span></code></p></td>
<td><p>Processes each intersection feature</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">_create_segment_from_geometry()</span></code></p></td>
<td><p>Creates GeologySegment from geometry</p></td>
</tr>
</tbody>
</table>
</section>
<section id="return-type">
<h4>Return Type<a class="headerlink" href="#return-type" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">GeologySegment</span><span class="p">:</span>
    <span class="n">unit_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>  <span class="c1"># (distance, elevation)</span>
    <span class="n">geometry</span><span class="p">:</span> <span class="n">QgsGeometry</span>
    <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="structureservice-structure-service-py">
<h3>3. StructureService (structure_service.py)<a class="headerlink" href="#structureservice-structure-service-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">StructureService</span></code>
<strong>Lines of code</strong>: 216
<strong>Methods</strong>: 7
<strong>Responsibility</strong>: Projects structural measurements (dip/strike)</p>
<section id="projection-algorithm">
<h4>Projection Algorithm<a class="headerlink" href="#projection-algorithm" title="Link to this heading">ïƒ</a></h4>
<pre  class="mermaid">
        graph TD
    A[Structural Measurement] --&gt; B[Create Buffer]
    B --&gt; C[Filter Structures]
    C --&gt; D[For each structure]
    D --&gt; E[Project point to line]
    E --&gt; F[Interpolate elevation]
    F --&gt; G[Calculate apparent dip]
    G --&gt; H[StructureMeasurement]
    </pre></section>
<section id="apparent-dip-calculation">
<h4>Apparent Dip Calculation<a class="headerlink" href="#apparent-dip-calculation" title="Link to this heading">ïƒ</a></h4>
<p>The formula used is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>apparent_dip = arctan(tan(true_dip) Ã— |cos(strike - section_azimuth)|)
</pre></div>
</div>
<p>Implemented in <code class="docutils literal notranslate"><span class="pre">utils.calculate_apparent_dip()</span></code>.</p>
</section>
<section id="id6">
<h4>Return Type<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">StructureMeasurement</span><span class="p">:</span>
    <span class="n">distance</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">elevation</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">apparent_dip</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">original_dip</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">original_strike</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">attributes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="drillholeservice-drillhole-service-py">
<h3>4. DrillholeService (drillhole_service.py)<a class="headerlink" href="#drillholeservice-drillhole-service-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">DrillholeService</span></code>
<strong>Lines of code</strong>: 319
<strong>Methods</strong>: 4
<strong>Responsibility</strong>: Processes and projects drillhole data</p>
<section id="id7">
<h4>Processing Flow<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h4>
<pre  class="mermaid">
        graph TB
    A[Collar Layer] --&gt; B[project_collars]
    C[Survey Layer] --&gt; D[process_intervals]
    E[Interval Layer] --&gt; D

    B --&gt; F[Collar Points]
    F --&gt; D

    D --&gt; G[Desurvey Drillhole]
    G --&gt; H[Project to Section]
    H --&gt; I[Create Segments]
    I --&gt; J[Drillhole Data]
    </pre><hr class="docutils" />
</section>
</section>
</section>
<section id="level-validation-architecture">
<span id="validation-architecture"></span><h2>ğŸ›¡ï¸ 3-Level Validation Architecture<a class="headerlink" href="#level-validation-architecture" title="Link to this heading">ïƒ</a></h2>
<p>The project implements a robust, tiered validation system to ensure data integrity across all layers without external dependencies like Pydantic.</p>
<section id="level-1-type-range-validation-dataclass-layer">
<h3>Level 1: Type &amp; Range Validation (Dataclass Layer)<a class="headerlink" href="#level-1-type-range-validation-dataclass-layer" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Location</strong>: <code class="docutils literal notranslate"><span class="pre">core/models/settings_model.py</span></code> using <code class="docutils literal notranslate"><span class="pre">core/validation/validators.py</span></code>.</p></li>
<li><p><strong>Purpose</strong>: Immediate feedback during object instantiation.</p></li>
<li><p><strong>Mechanism</strong>: <code class="docutils literal notranslate"><span class="pre">__post_init__</span></code> hooks use reusable validators (e.g., <code class="docutils literal notranslate"><span class="pre">validate_and_clamp</span></code>).</p></li>
<li><p><strong>Example</strong>: Ensuring vertical exaggeration is within <code class="docutils literal notranslate"><span class="pre">(0.1,</span> <span class="pre">10.0)</span></code>.</p></li>
</ul>
</section>
<section id="level-2-business-field-validation-form-layer">
<h3>Level 2: Business Field Validation (Form Layer)<a class="headerlink" href="#level-2-business-field-validation-form-layer" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Location</strong>: <code class="docutils literal notranslate"><span class="pre">core/validation/field_validator.py</span></code>.</p></li>
<li><p><strong>Purpose</strong>: Validates individual fields based on plugin-specific business rules.</p></li>
<li><p><strong>Mechanism</strong>: Checks for required fields, valid data types in QGIS layers, and mandatory combinations.</p></li>
</ul>
</section>
<section id="level-3-domain-cross-layer-validation-project-layer">
<h3>Level 3: Domain &amp; Cross-Layer Validation (Project Layer)<a class="headerlink" href="#level-3-domain-cross-layer-validation-project-layer" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>Location</strong>: <code class="docutils literal notranslate"><span class="pre">core/validation/project_validator.py</span></code>.</p></li>
<li><p><strong>Purpose</strong>: Validates the relationship between different layers and the project state.</p></li>
<li><p><strong>Mechanism</strong>: Checks if the section line intersects the DEM extent, or if drillholes fall within the buffer zone.</p></li>
</ul>
<hr class="docutils" />
<section id="drillhole-service">
<span id="id8"></span><h4>Main Methods<a class="headerlink" href="#drillhole-service" title="Link to this heading">ïƒ</a></h4>
<p><strong>1. project_collars()</strong></p>
<p>Projects collar points to the section line.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">project_collars</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">collar_layer</span><span class="p">:</span> <span class="n">QgsVectorLayer</span><span class="p">,</span>
    <span class="n">line_geom</span><span class="p">:</span> <span class="n">QgsGeometry</span><span class="p">,</span>
    <span class="n">line_start</span><span class="p">:</span> <span class="n">QgsPointXY</span><span class="p">,</span>
    <span class="n">distance_area</span><span class="p">:</span> <span class="n">QgsDistanceArea</span><span class="p">,</span>
    <span class="n">buffer_width</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">collar_id_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">use_geometry</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">collar_x_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">collar_y_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">collar_z_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">collar_depth_field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">dem_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">QgsRasterLayer</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns list of dictionaries with collar_id, distance, elevation, depth.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p><strong>2. process_intervals()</strong></p>
<p>Processes intervals and generates 2D traces.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">process_intervals</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">collar_points</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span>
    <span class="n">collar_layer</span><span class="p">:</span> <span class="n">QgsVectorLayer</span><span class="p">,</span>
    <span class="n">survey_layer</span><span class="p">:</span> <span class="n">QgsVectorLayer</span><span class="p">,</span>
    <span class="n">interval_layer</span><span class="p">:</span> <span class="n">QgsVectorLayer</span><span class="p">,</span>
    <span class="c1"># ... more parameters</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">GeologySegment</span><span class="p">],</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns (geology_segments, drillhole_traces).&quot;&quot;&quot;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="utilities-core-utils">
<h3>5. Utilities (core/utils/)<a class="headerlink" href="#utilities-core-utils" title="Link to this heading">ïƒ</a></h3>
<section id="geometry-py-345-lines">
<h4>geometry.py (345 lines)<a class="headerlink" href="#geometry-py-345-lines" title="Link to this heading">ïƒ</a></h4>
<p><strong>Geometric Operations with QGIS Core API</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">create_memory_layer()</span></code></p></td>
<td><p>Creates temporary in-memory layer</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">extract_all_vertices()</span></code></p></td>
<td><p>Extracts geometry vertices (multipart-safe)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">get_line_vertices()</span></code></p></td>
<td><p>Extracts line vertices</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">run_processing_algorithm()</span></code></p></td>
<td><p>Runs QGIS algorithm with error handling</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">create_buffer_geometry()</span></code></p></td>
<td><p>Creates buffer using <code class="docutils literal notranslate"><span class="pre">native:buffer</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filter_features_by_buffer()</span></code></p></td>
<td><p>Filters features with spatial index</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">densify_line_by_interval()</span></code></p></td>
<td><p>Densifies line with <code class="docutils literal notranslate"><span class="pre">native:densifygeometriesgivenaninterval</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="drillhole-py-7-297-lines">
<h4>drillhole.py (7,297 lines)<a class="headerlink" href="#drillhole-py-7-297-lines" title="Link to this heading">ïƒ</a></h4>
<p><strong>Drillhole Processing</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">desurvey_drillhole()</span></code></p></td>
<td><p>Calculates 3D trajectory from survey</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">project_drillhole_to_section()</span></code></p></td>
<td><p>Projects 3D trace to 2D plane</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interpolate_intervals()</span></code></p></td>
<td><p>Interpolates intervals on trace</p></td>
</tr>
</tbody>
</table>
</section>
<section id="sampling-py-3-783-lines">
<h4>sampling.py (3,783 lines)<a class="headerlink" href="#sampling-py-3-783-lines" title="Link to this heading">ïƒ</a></h4>
<p><strong>Sampling and Interpolation</strong></p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Function</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interpolate_elevation()</span></code></p></td>
<td><p>Interpolates elevation on grid</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sample_raster_along_line()</span></code></p></td>
<td><p>Samples raster along a line</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="datacache-data-cache-py">
<h3>6. DataCache (data_cache.py)<a class="headerlink" href="#datacache-data-cache-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">DataCache</span></code>
<strong>Lines of code</strong>: 7,883
<strong>Responsibility</strong>: Cache of processed data</p>
<section id="cache-strategy">
<h4>Cache Strategy<a class="headerlink" href="#cache-strategy" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DataCache</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates a unique key based on relevant inputs.&quot;&quot;&quot;</span>
        <span class="c1"># Considers: layers, bands, buffer, vertical exaggeration</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieves data from cache.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Stores data in cache.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Clears the entire cache.&quot;&quot;&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
</section>
</section>
<section id="exporters-layer-data-export">
<span id="id9"></span><h2>ğŸ“¤ Exporters Layer - Data Export<a class="headerlink" href="#exporters-layer-data-export" title="Link to this heading">ïƒ</a></h2>
<section id="dataexportorchestrator-orchestrator-py">
<h3>1. DataExportOrchestrator (orchestrator.py)<a class="headerlink" href="#dataexportorchestrator-orchestrator-py" title="Link to this heading">ïƒ</a></h3>
<p><strong>Class</strong>: <code class="docutils literal notranslate"><span class="pre">DataExportOrchestrator</span></code>
<strong>Lines of code</strong>: 148
<strong>Responsibility</strong>: Coordinates exports to multiple formats</p>
<section id="id10">
<h4>Main Method<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">export_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">output_folder</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">profile_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">],</span>
    <span class="n">geol_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">struct_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]],</span>
    <span class="n">drillhole_data</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exports generated data to CSV and Shapefile using lazy imports.&quot;&quot;&quot;</span>

    <span class="c1"># Lazy import of exporters</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">sec_interp.exporters</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
        <span class="n">AxesShpExporter</span><span class="p">,</span>
        <span class="n">CSVExporter</span><span class="p">,</span>
        <span class="n">GeologyShpExporter</span><span class="p">,</span>
        <span class="n">ProfileLineShpExporter</span><span class="p">,</span>
        <span class="n">StructureShpExporter</span><span class="p">,</span>
        <span class="n">DrillholeTraceShpExporter</span><span class="p">,</span>
        <span class="n">DrillholeIntervalShpExporter</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Export topography</span>
    <span class="n">csv_exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;topo_profile.csv&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
    <span class="n">ProfileLineShpExporter</span><span class="p">({})</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;profile_line.shp&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

    <span class="c1"># Export geology</span>
    <span class="k">if</span> <span class="n">geol_data</span><span class="p">:</span>
        <span class="n">csv_exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;geol_profile.csv&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
        <span class="n">GeologyShpExporter</span><span class="p">({})</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;geol_profile.shp&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

    <span class="c1"># Export structures</span>
    <span class="k">if</span> <span class="n">struct_data</span><span class="p">:</span>
        <span class="n">csv_exporter</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;structural_profile.csv&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
        <span class="n">StructureShpExporter</span><span class="p">({})</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;structural_profile.shp&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

    <span class="c1"># Export drillholes</span>
    <span class="k">if</span> <span class="n">drillhole_data</span><span class="p">:</span>
        <span class="n">DrillholeTraceShpExporter</span><span class="p">({})</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;drillhole_traces.shp&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
        <span class="n">DrillholeIntervalShpExporter</span><span class="p">({})</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="n">output_folder</span> <span class="o">/</span> <span class="s2">&quot;drillhole_intervals.shp&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">result_msg</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="exporter-hierarchy">
<h3>2. Exporter Hierarchy<a class="headerlink" href="#exporter-hierarchy" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        classDiagram
    class BaseExporter {
        &lt;&lt;abstract&gt;&gt;
        +export(path, data)
    }

    class CSVExporter {
        +export(path, data)
    }

    class ShapefileExporter {
        +export(path, data)
    }

    class ImageExporter {
        +export(path, map_settings)
    }

    class PDFExporter {
        +export(path, map_settings)
    }

    class SVGExporter {
        +export(path, map_settings)
    }

    BaseExporter &lt;|-- CSVExporter
    BaseExporter &lt;|-- ShapefileExporter
    BaseExporter &lt;|-- ImageExporter
    BaseExporter &lt;|-- PDFExporter
    BaseExporter &lt;|-- SVGExporter

    ShapefileExporter &lt;|-- ProfileLineShpExporter
    ShapefileExporter &lt;|-- GeologyShpExporter
    ShapefileExporter &lt;|-- StructureShpExporter
    ShapefileExporter &lt;|-- AxesShpExporter
    ShapefileExporter &lt;|-- DrillholeTraceShpExporter
    ShapefileExporter &lt;|-- DrillholeIntervalShpExporter
    </pre><hr class="docutils" />
</section>
</section>
<section id="main-data-flows">
<span id="id11"></span><h2>ğŸ”„ Main Data Flows<a class="headerlink" href="#main-data-flows" title="Link to this heading">ïƒ</a></h2>
<section id="flow-1-preview-generation">
<h3>Flow 1: Preview Generation<a class="headerlink" href="#flow-1-preview-generation" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        sequenceDiagram
    participant User
    participant Dialog as SecInterpDialog
    participant PreviewMgr as PreviewManager
    participant Controller
    participant Services
    participant Renderer
    participant Canvas

    User-&gt;&gt;Dialog: Click &quot;Preview Profile&quot;
    Dialog-&gt;&gt;PreviewMgr: generate_preview()

    PreviewMgr-&gt;&gt;PreviewMgr: _get_validated_inputs()
    PreviewMgr-&gt;&gt;Controller: generate_profile_data(inputs)

    par Parallel Processing
        Controller-&gt;&gt;Services: ProfileService.generate_topographic_profile()
        Services--&gt;&gt;Controller: profile_data

        Controller-&gt;&gt;Services: GeologyService.generate_geological_profile()
        Services--&gt;&gt;Controller: geol_data

        Controller-&gt;&gt;Services: StructureService.project_structures()
        Services--&gt;&gt;Controller: struct_data

        Controller-&gt;&gt;Services: DrillholeService.project_collars()
        Services-&gt;&gt;Services: DrillholeService.process_intervals()
        Services--&gt;&gt;Controller: drillhole_data
    end

    Controller--&gt;&gt;PreviewMgr: (profile, geol, struct, drill, msgs)

    PreviewMgr-&gt;&gt;Renderer: render(profile, geol, struct, drill, vert_exag, ...)
    Renderer-&gt;&gt;Renderer: _create_topo_layer()
    Renderer-&gt;&gt;Renderer: _create_geol_layer()
    Renderer-&gt;&gt;Renderer: _create_struct_layer()
    Renderer-&gt;&gt;Renderer: _create_drillhole_layers()
    Renderer-&gt;&gt;Renderer: _create_axes_layer()

    Renderer-&gt;&gt;Canvas: setLayers(layers)
    Renderer-&gt;&gt;Canvas: zoomToFullExtent()
    Renderer--&gt;&gt;PreviewMgr: (canvas, layers)

    PreviewMgr--&gt;&gt;Dialog: success
    Dialog--&gt;&gt;User: Display Preview
    </pre></section>
<hr class="docutils" />
<section id="flow-2-data-export">
<h3>Flow 2: Data Export<a class="headerlink" href="#flow-2-data-export" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        sequenceDiagram
    participant User
    participant Dialog
    participant ExportMgr as ExportManager
    participant Controller
    participant Orchestrator
    participant Exporters

    User-&gt;&gt;Dialog: Click &quot;Save&quot;
    Dialog-&gt;&gt;ExportMgr: export_data()

    ExportMgr-&gt;&gt;Controller: generate_profile_data(inputs)
    Controller--&gt;&gt;ExportMgr: (profile, geol, struct, drill, msgs)

    ExportMgr-&gt;&gt;Orchestrator: export_data(folder, values, data...)

    Orchestrator-&gt;&gt;Exporters: CSVExporter.export(&quot;topo_profile.csv&quot;)
    Exporters--&gt;&gt;Orchestrator: success

    Orchestrator-&gt;&gt;Exporters: ProfileLineShpExporter.export(&quot;profile_line.shp&quot;)
    Exporters--&gt;&gt;Orchestrator: success

    Orchestrator-&gt;&gt;Exporters: GeologyShpExporter.export(&quot;geol_profile.shp&quot;)
    Exporters--&gt;&gt;Orchestrator: success

    Orchestrator-&gt;&gt;Exporters: StructureShpExporter.export(&quot;structural_profile.shp&quot;)
    Exporters--&gt;&gt;Orchestrator: success

    Orchestrator-&gt;&gt;Exporters: DrillholeTraceShpExporter.export(&quot;drillhole_traces.shp&quot;)
    Exporters--&gt;&gt;Orchestrator: success

    Orchestrator--&gt;&gt;ExportMgr: result_messages
    ExportMgr--&gt;&gt;Dialog: success
    Dialog--&gt;&gt;User: &quot;All files saved to: {folder}&quot;
    </pre></section>
<hr class="docutils" />
<section id="flow-3-parallel-geological-processing">
<h3>Flow 3: Parallel Geological Processing<a class="headerlink" href="#flow-3-parallel-geological-processing" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        sequenceDiagram
    participant Main as Main Thread
    participant GeoService as GeologyService
    participant ParallelGeo as ParallelGeologyService
    participant Worker as GeologyProcessingThread

    Main-&gt;&gt;GeoService: generate_geological_profile()
    GeoService-&gt;&gt;ParallelGeo: process_async(line, raster, outcrop, field, band)

    ParallelGeo-&gt;&gt;Worker: start()
    Note over Worker: QThread Worker

    Worker-&gt;&gt;Worker: run()
    Worker-&gt;&gt;Worker: _generate_master_profile_data()
    Worker-&gt;&gt;Worker: _perform_intersection()

    loop For each feature
        Worker-&gt;&gt;Worker: _process_intersection_feature()
    end

    Worker-&gt;&gt;ParallelGeo: finished.emit(results)
    ParallelGeo-&gt;&gt;GeoService: return results
    GeoService--&gt;&gt;Main: List[GeologySegment]
    </pre><hr class="docutils" />
</section>
</section>
<section id="design-patterns">
<span id="id12"></span><h2>ğŸ¨ Design Patterns<a class="headerlink" href="#design-patterns" title="Link to this heading">ïƒ</a></h2>
<section id="mvc-model-view-controller">
<h3>1. MVC (Model-View-Controller)<a class="headerlink" href="#mvc-model-view-controller" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Model</span><span class="p">:</span>      <span class="n">Services</span> <span class="o">+</span> <span class="n">Algorithms</span> <span class="o">+</span> <span class="n">Types</span>
<span class="n">View</span><span class="p">:</span>       <span class="n">GUI</span> <span class="n">Widgets</span> <span class="o">+</span> <span class="n">Renderer</span>
<span class="n">Controller</span><span class="p">:</span> <span class="n">ProfileController</span>
</pre></div>
</div>
</section>
<section id="strategy-pattern">
<h3>2. Strategy Pattern<a class="headerlink" href="#strategy-pattern" title="Link to this heading">ïƒ</a></h3>
<p>Different exporters implement the same <code class="docutils literal notranslate"><span class="pre">BaseExporter</span></code> interface:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">BaseExporter</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">pass</span>

<span class="k">class</span><span class="w"> </span><span class="nc">CSVExporter</span><span class="p">(</span><span class="n">BaseExporter</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># CSV Specific implementation</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ShapefileExporter</span><span class="p">(</span><span class="n">BaseExporter</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">:</span> <span class="n">Path</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="c1"># Shapefile Specific implementation</span>
</pre></div>
</div>
</section>
<section id="observer-pattern">
<h3>3. Observer Pattern<a class="headerlink" href="#observer-pattern" title="Link to this heading">ïƒ</a></h3>
<p>PyQt5 Signals/Slots for communication between components:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Signal</span>
<span class="n">measurementChanged</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>

<span class="c1"># Slot</span>
<span class="k">def</span><span class="w"> </span><span class="nf">update_measurement_display</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dist</span><span class="p">,</span> <span class="n">slope</span><span class="p">):</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Distance: </span><span class="si">{</span><span class="n">dist</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m...&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">results_text</span><span class="o">.</span><span class="n">setHtml</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

<span class="c1"># Connection</span>
<span class="bp">self</span><span class="o">.</span><span class="n">measure_tool</span><span class="o">.</span><span class="n">measurementChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_measurement_display</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="facade-pattern">
<h3>4. Facade Pattern<a class="headerlink" href="#facade-pattern" title="Link to this heading">ïƒ</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ProfileController</span></code> acts as a facade for the services:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ProfileController</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">generate_profile_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="c1"># Orchestrates multiple services</span>
        <span class="n">profile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile_service</span><span class="o">.</span><span class="n">generate_topographic_profile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">geol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geology_service</span><span class="o">.</span><span class="n">generate_geological_profile</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">struct</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">structure_service</span><span class="o">.</span><span class="n">project_structures</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="n">drill</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">drillhole_service</span><span class="o">.</span><span class="n">process_intervals</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">profile</span><span class="p">,</span> <span class="n">geol</span><span class="p">,</span> <span class="n">struct</span><span class="p">,</span> <span class="n">drill</span><span class="p">,</span> <span class="n">msgs</span>
</pre></div>
</div>
</section>
<section id="factory-pattern">
<h3>5. Factory Pattern<a class="headerlink" href="#factory-pattern" title="Link to this heading">ïƒ</a></h3>
<p>Exporter Factory:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_exporter</span><span class="p">(</span><span class="n">ext</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">settings</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseExporter</span><span class="p">:</span>
    <span class="n">exporters</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;.png&#39;</span><span class="p">:</span> <span class="n">ImageExporter</span><span class="p">,</span>
        <span class="s1">&#39;.jpg&#39;</span><span class="p">:</span> <span class="n">ImageExporter</span><span class="p">,</span>
        <span class="s1">&#39;.pdf&#39;</span><span class="p">:</span> <span class="n">PDFExporter</span><span class="p">,</span>
        <span class="s1">&#39;.svg&#39;</span><span class="p">:</span> <span class="n">SVGExporter</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">exporter_class</span> <span class="o">=</span> <span class="n">exporters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">exporter_class</span><span class="p">(</span><span class="n">settings</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="singleton-pattern-implicit">
<h3>6. Singleton Pattern (Implicit)<a class="headerlink" href="#singleton-pattern-implicit" title="Link to this heading">ïƒ</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">DataCache</span></code> is instantiated once in the controller.</p>
</section>
<section id="template-method-pattern">
<h3>7. Template Method Pattern<a class="headerlink" href="#template-method-pattern" title="Link to this heading">ïƒ</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">BaseExporter</span></code> defines the template, subclasses implement details:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">BaseExporter</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">export</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_write</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_finalize</span><span class="p">()</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">_write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>
</div>
<hr class="docutils" />
</section>
</section>
<section id="external-dependencies">
<span id="id13"></span><h2>ğŸŒ External Dependencies<a class="headerlink" href="#external-dependencies" title="Link to this heading">ïƒ</a></h2>
<section id="qgis-core-api">
<h3>QGIS Core API<a class="headerlink" href="#qgis-core-api" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qgis.core</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">QgsVectorLayer</span><span class="p">,</span>        <span class="c1"># Vector layers</span>
    <span class="n">QgsRasterLayer</span><span class="p">,</span>        <span class="c1"># Raster layers</span>
    <span class="n">QgsGeometry</span><span class="p">,</span>           <span class="c1"># Geometric operations</span>
    <span class="n">QgsProcessing</span><span class="p">,</span>         <span class="c1"># Processing algorithms</span>
    <span class="n">QgsSpatialIndex</span><span class="p">,</span>       <span class="c1"># Spatial indices</span>
    <span class="n">QgsCoordinateTransform</span><span class="p">,</span><span class="c1"># Coordinate transformations</span>
    <span class="n">QgsDistanceArea</span><span class="p">,</span>       <span class="c1"># Distance calculations</span>
    <span class="n">QgsProject</span><span class="p">,</span>            <span class="c1"># QGIS Project</span>
    <span class="n">QgsFeature</span><span class="p">,</span>            <span class="c1"># Features</span>
    <span class="n">QgsField</span><span class="p">,</span>              <span class="c1"># Fields</span>
    <span class="n">QgsWkbTypes</span><span class="p">,</span>           <span class="c1"># Geometry types</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Main use</strong>: All geometric operations, spatial processing, and layer management.</p>
</section>
<section id="qgis-gui-api">
<h3>QGIS GUI API<a class="headerlink" href="#qgis-gui-api" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">qgis.gui</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">QgsMapCanvas</span><span class="p">,</span>          <span class="c1"># Map canvas</span>
    <span class="n">QgsMapTool</span><span class="p">,</span>            <span class="c1"># Map tools</span>
    <span class="n">QgsMapLayer</span><span class="p">,</span>           <span class="c1"># Map layers</span>
    <span class="n">QgsMapLayerComboBox</span><span class="p">,</span>   <span class="c1"># Layer combo boxes</span>
    <span class="n">QgsFileWidget</span><span class="p">,</span>         <span class="c1"># File widget</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Main use</strong>: User interface, interactive tools, specialized widgets.</p>
</section>
<section id="pyqt5">
<h3>PyQt5<a class="headerlink" href="#pyqt5" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtCore</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Qt</span><span class="p">,</span>                    <span class="c1"># Qt constants</span>
    <span class="n">QVariant</span><span class="p">,</span>              <span class="c1"># Data types</span>
    <span class="n">pyqtSignal</span><span class="p">,</span>            <span class="c1"># Signals</span>
    <span class="n">pyqtSlot</span><span class="p">,</span>              <span class="c1"># Slots</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">QDialog</span><span class="p">,</span>               <span class="c1"># Dialogs</span>
    <span class="n">QWidget</span><span class="p">,</span>               <span class="c1"># Base widgets</span>
    <span class="n">QPushButton</span><span class="p">,</span>           <span class="c1"># Buttons</span>
    <span class="n">QCheckBox</span><span class="p">,</span>             <span class="c1"># Checkboxes</span>
    <span class="n">QSpinBox</span><span class="p">,</span>              <span class="c1"># Spin boxes</span>
    <span class="n">QComboBox</span><span class="p">,</span>             <span class="c1"># Combo boxes</span>
    <span class="n">QLabel</span><span class="p">,</span>                <span class="c1"># Labels</span>
    <span class="n">QGroupBox</span><span class="p">,</span>             <span class="c1"># Group boxes</span>
    <span class="n">QVBoxLayout</span><span class="p">,</span>           <span class="c1"># Vertical layouts</span>
    <span class="n">QHBoxLayout</span><span class="p">,</span>           <span class="c1"># Horizontal layouts</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtGui</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">QColor</span><span class="p">,</span>                <span class="c1"># Colors</span>
    <span class="n">QFont</span><span class="p">,</span>                 <span class="c1"># Fonts</span>
    <span class="n">QPen</span><span class="p">,</span>                  <span class="c1"># Drawing pens</span>
    <span class="n">QBrush</span><span class="p">,</span>                <span class="c1"># Fill brushes</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>Main use</strong>: Complete UI framework, signals/slots, layouts, widgets.</p>
<hr class="docutils" />
</section>
</section>
<section id="performance-optimizations">
<span id="id14"></span><h2>âš¡ Performance Optimizations<a class="headerlink" href="#performance-optimizations" title="Link to this heading">ïƒ</a></h2>
<section id="adaptive-level-of-detail-lod">
<h3>1. Adaptive Level of Detail (LOD)<a class="headerlink" href="#adaptive-level-of-detail-lod" title="Link to this heading">ïƒ</a></h3>
<p><strong>Implemented in</strong>: <code class="docutils literal notranslate"><span class="pre">PreviewRenderer</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">_decimate_line_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">tolerance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_points</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Simplifies lines using Douglas-Peucker.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_points</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>

    <span class="c1"># Calculate automatic tolerance</span>
    <span class="k">if</span> <span class="n">tolerance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">x_range</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span> <span class="o">-</span> <span class="nb">min</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span>
        <span class="n">tolerance</span> <span class="o">=</span> <span class="n">x_range</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_points</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c1"># Apply Douglas-Peucker</span>
    <span class="n">simplified</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_douglas_peucker</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tolerance</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">simplified</span>
</pre></div>
</div>
<p><strong>Benefit</strong>: Reduces 10,000+ points to ~1,000 without significant visual loss.</p>
</section>
<section id="curvature-based-adaptive-sampling">
<h3>2. Curvature-based Adaptive Sampling<a class="headerlink" href="#curvature-based-adaptive-sampling" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">_adaptive_sample</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">min_tolerance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">max_tolerance</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">max_points</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Samples more densely in high-curvature areas.&quot;&quot;&quot;</span>
    <span class="n">curvatures</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calculate_curvature</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="c1"># Normalize curvatures</span>
    <span class="n">max_curv</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">curvatures</span><span class="p">)</span>
    <span class="n">normalized</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="o">/</span> <span class="n">max_curv</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">curvatures</span><span class="p">]</span>

    <span class="c1"># Tolerance inversely proportional to curvature</span>
    <span class="n">tolerances</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">max_tolerance</span> <span class="o">-</span> <span class="p">(</span><span class="n">max_tolerance</span> <span class="o">-</span> <span class="n">min_tolerance</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">normalized</span>
    <span class="p">]</span>

    <span class="c1"># Apply Douglas-Peucker with variable tolerance</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_douglas_peucker_adaptive</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">tolerances</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Benefit</strong>: Preserves important details (tight curves) while simplifying straight areas.</p>
</section>
<section id="parallel-geological-processing">
<h3>3. Parallel Geological Processing<a class="headerlink" href="#parallel-geological-processing" title="Link to this heading">ïƒ</a></h3>
<p><strong>Implemented in</strong>: <code class="docutils literal notranslate"><span class="pre">ParallelGeologyService</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">ParallelGeologyService</span><span class="p">(</span><span class="n">QObject</span><span class="p">):</span>
    <span class="n">finished</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">progress</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">error</span> <span class="o">=</span> <span class="n">pyqtSignal</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">process_async</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line_lyr</span><span class="p">,</span> <span class="n">raster_lyr</span><span class="p">,</span> <span class="n">outcrop_lyr</span><span class="p">,</span> <span class="n">field</span><span class="p">,</span> <span class="n">band</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Processes geology in a separate thread.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span> <span class="o">=</span> <span class="n">GeologyProcessingThread</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">finished</span><span class="o">.</span><span class="n">emit</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">worker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Benefit</strong>: UI remains responsive during heavy processing.</p>
</section>
<section id="processed-data-cache">
<h3>4. Processed Data Cache<a class="headerlink" href="#processed-data-cache" title="Link to this heading">ïƒ</a></h3>
<p><strong>Implemented in</strong>: <code class="docutils literal notranslate"><span class="pre">DataCache</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">get_cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a unique key based on relevant inputs.&quot;&quot;&quot;</span>
    <span class="n">key_parts</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;raster_layer&quot;</span><span class="p">),</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;selected_band&quot;</span><span class="p">),</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;crossline_layer&quot;</span><span class="p">),</span>
        <span class="n">inputs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;buffer_distance&quot;</span><span class="p">),</span>
        <span class="c1"># DOES NOT include: vertexag, dip_scale_factor (only for display)</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">key_parts</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Benefit</strong>: Avoids re-processing when only display parameters change.</p>
</section>
<section id="spatial-index-for-filtering">
<h3>5. Spatial Index for Filtering<a class="headerlink" href="#spatial-index-for-filtering" title="Link to this heading">ïƒ</a></h3>
<p><strong>Implemented in</strong>: <code class="docutils literal notranslate"><span class="pre">geometry.filter_features_by_buffer()</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">filter_features_by_buffer</span><span class="p">(</span><span class="n">features_layer</span><span class="p">,</span> <span class="n">buffer_geometry</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filters features using a spatial index.&quot;&quot;&quot;</span>
    <span class="c1"># 1. Build spatial index</span>
    <span class="n">index</span> <span class="o">=</span> <span class="n">QgsSpatialIndex</span><span class="p">(</span><span class="n">features_layer</span><span class="o">.</span><span class="n">getFeatures</span><span class="p">())</span>

    <span class="c1"># 2. Fast search by bounding box</span>
    <span class="n">candidate_ids</span> <span class="o">=</span> <span class="n">index</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">buffer_geometry</span><span class="o">.</span><span class="n">boundingBox</span><span class="p">())</span>

    <span class="c1"># 3. Precise filtering of candidates only</span>
    <span class="n">filtered</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">fid</span> <span class="ow">in</span> <span class="n">candidate_ids</span><span class="p">:</span>
        <span class="n">feature</span> <span class="o">=</span> <span class="n">features_layer</span><span class="o">.</span><span class="n">getFeature</span><span class="p">(</span><span class="n">fid</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">buffer_geometry</span><span class="p">):</span>
            <span class="n">filtered</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">filtered</span>
</pre></div>
</div>
<p><strong>Benefit</strong>: O(log n) instead of O(n) for spatial filtering.</p>
<hr class="docutils" />
</section>
</section>
<section id="project-metrics">
<span id="id15"></span><h2>ğŸ“Š Project Metrics<a class="headerlink" href="#project-metrics" title="Link to this heading">ïƒ</a></h2>
<section id="code-statistics">
<h3>Code Statistics<a class="headerlink" href="#code-statistics" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Metric</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Python Modules</strong></p></td>
<td><p>~60 files</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Total Lines of Code</strong></p></td>
<td><p>~15,000 LOC</p></td>
</tr>
<tr class="row-even"><td><p><strong>Core Lines of Code</strong></p></td>
<td><p>~8,000 LOC</p></td>
</tr>
<tr class="row-odd"><td><p><strong>GUI Lines of Code</strong></p></td>
<td><p>~5,000 LOC</p></td>
</tr>
<tr class="row-even"><td><p><strong>Exporters Lines of Code</strong></p></td>
<td><p>~2,000 LOC</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Main Classes</strong></p></td>
<td><p>25+</p></td>
</tr>
<tr class="row-even"><td><p><strong>Functions/Methods</strong></p></td>
<td><p>200+</p></td>
</tr>
</tbody>
</table>
</section>
<section id="distribution-by-layer">
<h3>Distribution by Layer<a class="headerlink" href="#distribution-by-layer" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        pie title Code Distribution by Layer
    &quot;Core (53%)&quot; : 8000
    &quot;GUI (33%)&quot; : 5000
    &quot;Exporters (13%)&quot; : 2000
    </pre></section>
<section id="complexity-by-module">
<h3>Complexity by Module<a class="headerlink" href="#complexity-by-module" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Lines</p></th>
<th class="head"><p>Classes</p></th>
<th class="head"><p>Methods</p></th>
<th class="head"><p>Complexity</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">sec_interp_plugin.py</span></code></p></td>
<td><p>~600</p></td>
<td><p>1</p></td>
<td><p>15</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">main_dialog.py</span></code></p></td>
<td><p>~340</p></td>
<td><p>1</p></td>
<td><p>12</p></td>
<td><p>Low/Medium</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">main_dialog_signals.py</span></code></p></td>
<td><p>~200</p></td>
<td><p>1</p></td>
<td><p>10</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">main_dialog_data.py</span></code></p></td>
<td><p>~150</p></td>
<td><p>1</p></td>
<td><p>8</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">preview_renderer.py</span></code></p></td>
<td><p>1,190</p></td>
<td><p>1</p></td>
<td><p>20</p></td>
<td><p>High</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">controller.py</span></code></p></td>
<td><p>192</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>Low</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">core/validation/</span></code></p></td>
<td><p>~800</p></td>
<td><p>0</p></td>
<td><p>25</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">geology_service.py</span></code></p></td>
<td><p>244</p></td>
<td><p>1</p></td>
<td><p>8</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">structure_service.py</span></code></p></td>
<td><p>216</p></td>
<td><p>1</p></td>
<td><p>7</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">drillhole_service.py</span></code></p></td>
<td><p>319</p></td>
<td><p>1</p></td>
<td><p>4</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">geometry.py</span></code></p></td>
<td><p>345</p></td>
<td><p>0</p></td>
<td><p>10</p></td>
<td><p>Medium</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">orchestrator.py</span></code></p></td>
<td><p>148</p></td>
<td><p>1</p></td>
<td><p>1</p></td>
<td><p>Low</p></td>
</tr>
</tbody>
</table>
</section>
<section id="dependencies">
<h3>Dependencies<a class="headerlink" href="#dependencies" title="Link to this heading">ïƒ</a></h3>
<pre  class="mermaid">
        graph LR
    A[SecInterp Plugin] --&gt; B[QGIS Core API]
    A --&gt; C[QGIS GUI API]
    A --&gt; D[PyQt5]

    B --&gt; E[Python 3.x]
    C --&gt; E
    D --&gt; E

    style A fill:#ff6b6b
    style B fill:#4ecdc4
    style C fill:#4ecdc4
    style D fill:#95e1d3
    style E fill:#ffd93d
    </pre></section>
<section id="feature-coverage">
<h3>Feature Coverage<a class="headerlink" href="#feature-coverage" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Feature</p></th>
<th class="head"><p>Status</p></th>
<th class="head"><p>Coverage</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Topographic Profile</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Geological Projection</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>Structural Projection</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Drillhole Projection</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>Interactive Preview</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Measurement Tools</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>CSV Export</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Shapefile Export</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>PDF Export</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>SVG Export</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>PNG/JPG Export</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Adaptive LOD</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-even"><td><p>Parallel Processing</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
<tr class="row-odd"><td><p>Data Cache</p></td>
<td><p>âœ… Complete</p></td>
<td><p>100%</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="references">
<h2>ğŸ”— References<a class="headerlink" href="#references" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p>[Source Code](file:///home/jmbernales/qgispluginsdev/sec_interp)</p></li>
<li><p>[Main README](file:///home/jmbernales/qgispluginsdev/sec_interp/README.md)</p></li>
<li><p>[User Guide](file:///home/jmbernales/qgispluginsdev/sec_interp/docs/USER_GUIDE.md)</p></li>
<li><p>[Architecture Graph](file:///home/jmbernales/qgispluginsdev/sec_interp/docs/sec_interp_architecture_graph.md)</p></li>
<li><p><a class="reference external" href="https://qgis.org/pyqgis/master/">QGIS API Documentation</a></p></li>
<li><p><a class="reference external" href="https://www.riverbankcomputing.com/static/Docs/PyQt5/">PyQt5 Documentation</a></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="design-principles">
<h2>ğŸ¨ Design Principles<a class="headerlink" href="#design-principles" title="Link to this heading">ïƒ</a></h2>
<p>The SecInterp plugin has been designed following robust software engineering principles to ensure quality and maintainability.</p>
<section id="solid-principles">
<h3>SOLID Principles<a class="headerlink" href="#solid-principles" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>SRP (Single Responsibility Principle)</strong>: Each service (Profile, Geology, Structure, Drillhole) has a single, clear responsibility.</p></li>
<li><p><strong>OCP (Open/Closed Principle)</strong>: Exporters are easily extensible through the abstract base class without modifying the core logic.</p></li>
<li><p><strong>LSP (Liskov Substitution Principle)</strong>: All concrete exporters can subtitute the <code class="docutils literal notranslate"><span class="pre">BaseExporter</span></code> class.</p></li>
<li><p><strong>ISP (Interface Segregation Principle)</strong>: Service interfaces are focused on their specific domain.</p></li>
<li><p><strong>DIP (Dependency Inversion Principle)</strong>: The controller depends on abstractions and injected services, not on heavy concrete implementations.</p></li>
</ul>
</section>
<section id="other-patterns-and-principles">
<h3>Other Patterns and Principles<a class="headerlink" href="#other-patterns-and-principles" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><strong>DRY (Donâ€™t Repeat Yourself)</strong>: Intensive use of <code class="docutils literal notranslate"><span class="pre">utils</span></code> modules to centralize mathematical and spatial calculations.</p></li>
<li><p><strong>Separation of Concerns</strong>: Clear distinction between the GUI Layer (Managers), Core Layer (Services), and Data Layer (DataCache).</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="extensibility">
<h2>ğŸš€ Extensibility<a class="headerlink" href="#extensibility" title="Link to this heading">ïƒ</a></h2>
<p>Quick guide for developers wishing to expand the plugin.</p>
<section id="adding-a-new-service">
<h3>Adding a New Service<a class="headerlink" href="#adding-a-new-service" title="Link to this heading">ïƒ</a></h3>
<ol class="arabic simple">
<li><p>Create the new file in <code class="docutils literal notranslate"><span class="pre">core/services/</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">seismic_service.py</span></code>).</p></li>
<li><p>Implement the service logic following the pattern of other services.</p></li>
<li><p>Register the service in <code class="docutils literal notranslate"><span class="pre">controller.py</span></code> within the <code class="docutils literal notranslate"><span class="pre">ProfileController</span></code> constructor.</p></li>
<li><p>Add the orchestrator method in the controller and connect it to <code class="docutils literal notranslate"><span class="pre">PreviewManager</span></code>.</p></li>
</ol>
</section>
<section id="adding-a-new-export-format">
<h3>Adding a New Export Format<a class="headerlink" href="#adding-a-new-export-format" title="Link to this heading">ïƒ</a></h3>
<ol class="arabic simple">
<li><p>Create a class in <code class="docutils literal notranslate"><span class="pre">exporters/</span></code> that inherits from <code class="docutils literal notranslate"><span class="pre">BaseExporter</span></code>.</p></li>
<li><p>Implement the required <code class="docutils literal notranslate"><span class="pre">export()</span></code> method.</p></li>
<li><p>Register the new exporter in the factory in <code class="docutils literal notranslate"><span class="pre">orchestrator.py</span></code> or the specific export modules.</p></li>
</ol>
</section>
</section>
<hr class="docutils" />
<section id="deployment">
<h2>ğŸ“¦ Deployment<a class="headerlink" href="#deployment" title="Link to this heading">ïƒ</a></h2>
<p>The plugin uses a <code class="docutils literal notranslate"><span class="pre">Makefile</span></code>-based system to facilitate local deployment and packaging.</p>
<ul class="simple">
<li><p><strong>Main command</strong>: <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">deploy</span></code> (Copies files to the QGIS plugins directory).</p></li>
<li><p><strong>Process</strong>:</p>
<ul>
<li><p>Temporary files (<code class="docutils literal notranslate"><span class="pre">.pyc</span></code>, etc.) are cleaned.</p></li>
<li><p>Resources and translations are copied.</p></li>
<li><p>Synchronized with the local QGIS directory for immediate testing.</p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="final-notes">
<h2>ğŸ“ Final Notes<a class="headerlink" href="#final-notes" title="Link to this heading">ïƒ</a></h2>
<p>This document provides a detailed view of the SecInterp plugin architecture. For development information, see [README_DEV.md](file:///home/jmbernales/qgispluginsdev/sec_interp/README_DEV.md).</p>
<p><strong>Last update</strong>: 2026-01-18
<strong>Plugin Version</strong>: 2.7.0
<strong>Author</strong>: Juan M. Bernales</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="USER_GUIDE.html" class="btn btn-neutral float-left" title="SecInterp User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DEVELOPMENT_GUIDE.html" class="btn btn-neutral float-right" title="SecInterp - Development Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2026, Juan M Bernales.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>